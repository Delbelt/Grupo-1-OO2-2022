<!DOCTYPE html>
<html xmlns:th="htpp://www.thymeleaf.org">

	<head th:replace="layout/template :: head(#{action-save-edit})"></head>

	<body>	
		<section th:replace="layout/template :: header"></section> <!-- PLANTILLA:  HEADER + NAVBAR-->	
		
		<h1 th:text="#{action-save-edit}"></h1>
		
		<br>
		
		<h3><a th:href="@{/user/users}" th:text="#{go-back}"> GO BACK </a></h3>		
		
		<form th:action="@{/user/addUser}" method="post" th:object="${user}">
		
			<input type="hidden" name="idUser" th:field="*{idUser}"/> <!-- HIDDEN = OCULTO A LA VISTA -->
			<!-- SE AGREGA ESTE INPUT PARA DECIRLE A SPRING QUE EL OBJETO YA ESTA INSTANCIADO EN CASO DE MODIFICAR -->
			<!-- PARA QUE NO TE LO VUELVA A AGREGAR, PORQUE SUPONE QUE ES UNO NUEVO, PERO AL TENER ID, LO CONSERVA -->
						
			<br><br>
			
			<label for="document"> [[#{user-document}]] </label>
			<input type="text" name="document" th:field="*{document}" autocomplete="off" required/> <!-- th:field ES LA FORMA DE COMUNICARSE CON "th:object" -->
			<!-- ASTERISCO * SIRVE PARA SELECCIONAR EL ATRIBUTO DE th:object TANTO PARA LEER O MODIFICAR -->
			<span th:if="${#fields.hasErrors('document')}" th:errors="*{document}">ERROR document</span> <!-- validacion -->
			
			<br><br>
			
			<label for="enabled"> Enabled </label>
			<input type="checkbox" name="enabled" th:field="*{enabled}" value="false"/><!-- th:field ES LA FORMA DE COMUNICARSE CON "th:object" -->

			<br><br>
			
			<label for="email"> [[#{user-email}]] </label>
			<input type="text" name="email" th:field="*{email}" autocomplete="off" required/> <!-- th:field ES LA FORMA DE COMUNICARSE CON "th:object" -->
			<!-- ASTERISCO * SIRVE PARA SELECCIONAR EL ATRIBUTO DE th:object TANTO PARA LEER O MODIFICAR -->
			<span th:if="${#fields.hasErrors('email')}" th:errors="*{email}">ERROR email</span> <!-- validacion -->
			
			<br><br>
			
			<label for="name"> [[#{user-name}]] </label>
			<input type="text" name="name" th:field="*{name}" autocomplete="off" required/> <!-- th:field ES LA FORMA DE COMUNICARSE CON "th:object" -->
			<!-- ASTERISCO * SIRVE PARA SELECCIONAR EL ATRIBUTO DE th:object TANTO PARA LEER O MODIFICAR -->
			<span th:if="${#fields.hasErrors('name')}" th:errors="*{name}">ERROR name</span> <!-- validacion -->
			
			<br><br>
			
			<label for="password"> [[#{user-password}]] </label>
			<input type="password" name="password" th:field="*{password}" autocomplete="off" required/> <!-- th:field ES LA FORMA DE COMUNICARSE CON "th:object" -->
			<!-- ASTERISCO * SIRVE PARA SELECCIONAR EL ATRIBUTO DE th:object TANTO PARA LEER O MODIFICAR -->
			<span th:if="${#fields.hasErrors('password')}" th:errors="*{password}">ERROR password</span> <!-- validacion -->
			
			<br><br>
			
			<label for="surname"> [[#{user-surname}]] </label>
			<input type="text" name="surname" th:field="*{surname}" autocomplete="off" required/> <!-- th:field ES LA FORMA DE COMUNICARSE CON "th:object" -->
			<!-- ASTERISCO * SIRVE PARA SELECCIONAR EL ATRIBUTO DE th:object TANTO PARA LEER O MODIFICAR -->
			<span th:if="${#fields.hasErrors('surname')}" th:errors="*{surname}">ERROR surname</span> <!-- validacion -->
			
			<br><br>
			
			<label for="type"> [[#{user-type}]] </label>
			<input type="text" name="type" th:field="*{type}" autocomplete="off" required/> <!-- th:field ES LA FORMA DE COMUNICARSE CON "th:object" -->
			<!-- ASTERISCO * SIRVE PARA SELECCIONAR EL ATRIBUTO DE th:object TANTO PARA LEER O MODIFICAR -->
			<span th:if="${#fields.hasErrors('type')}" th:errors="*{type}">ERROR type</span> <!-- validacion -->
			
			<br><br>
			
			<label for="userName"> [[#{user-username}]] </label>
			<input type="text" name="userName" th:field="*{userName}" autocomplete="off" required/> <!-- th:field ES LA FORMA DE COMUNICARSE CON "th:object" -->
			<!-- ASTERISCO * SIRVE PARA SELECCIONAR EL ATRIBUTO DE th:object TANTO PARA LEER O MODIFICAR -->
			<span th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}">ERROR userName</span> <!-- validacion -->	
			
			<br><br>     
			
			<!-- SELECCION DE ROL (REUTILIZAR EN OTRAS CLASES) -->        	

        	<span>[[#{user-role}]]</span>
			<select th:field="*{role}" name="role">	
				<option th:each="role : ${listRole}"
					th:value="${(role.idRole)}" 
					th:text="${role.name}">
				</option>
            </select>
                
            <br><br>

			<input type="submit" name="save" th:value="#{action-save}"/>			
			
		</form>	
		
		<footer th:replace="layout/template :: footer"></footer> <!-- PLANTILLA: PIE DE PAGINA -->		
	</body>
</html>
